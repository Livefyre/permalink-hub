<html>
    <head>
        <style>
            .status {
                height: 50px;
                background-color: yellow;
            }

            .status.success {
                background-color: green;
            }

            .status.failure {
                background-color: red;
            }

            .app {
                width: 200px;
                border: 1px solid black;
                display:inline-block;
                margin: 5px;
            }

            .main-comms {
                height: 200px;
                margin-bottom: 10px;
                overflow-y: scroll;
            }

            .comms {
                height: 300px;
                overflow-y: scroll;
            }
        </style>
        <script>
            var ARTICLE_RE = /[?&]articleId=([^&#]*)/;
            var SITE_RE = /[?&]siteId=([^&#]*)/;
            try {
                var LF_articleId = document.location.href.match(ARTICLE_RE)[1];
            } catch (e) {
                document.write('<h1>USE ?articleId=XXX QUERY PARAM!</h1>');
            }

            try {
                var LF_siteId = document.location.href.match(SITE_RE)[1];
            } catch (e) {
                document.write('<h1>USE ?siteId=XXX QUERY PARAM!</h1>');
            }
        </script>
    </head>
    <body>
        <script src="" type="text/javascript">
        //http://localhost:8080/examples/permalink-from-cdn.html?lfcdn=0&lfVersion[streamhub-permalink]=0.2.0-permalink-example&lfjsUrl=//livefyre-cdn.s3.amazonaws.com/libs/Livefyre/v0.4.0-permalink-example/Livefyre.js&siteId=4&articleId=6556-sidenotes&#lf-content=89335249:01184bbe19f6426c87c3428ffb364b38@livefyre.com
        </script>

        <div class="main-comms">
            <ul class="all-comms"></ul>
        </div>
        <button type="button">Clear</button>

        <script type="text/javascript">
            var comms = document.querySelectorAll('.all-comms')[0];
            window.addEventListener("message", function(event){
                comms.innerHTML = comms.innerHTML + '<li>'+ event.data +'</li>';
            }, false);
            var btn = document.getElementsByTagName('button')[0];
            btn.onclick = function(){
                comms.innerHTML = "";
            }
        </script>

        <script type="text/javascript" src="https://cdn.livefyre.com/Livefyre.js">
        </script>

        <h1>Some Content</h1>

        <div id="content">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam non lacus eu lorem venenatis imperdiet. Nam vitae lorem fringilla tortor facilisis euismod. Integer pellentesque nibh in arcu aliquam, ut vestibulum tellus ornare. Nulla sodales, turpis in viverra posuere, tellus libero porta massa, quis laoreet nisl risus at justo. Etiam fringilla, sem in blandit adipiscing, magna nibh pretium massa, non ullamcorper massa felis nec enim. Praesent nec tortor condimentum, luctus enim quis, pretium orci. Maecenas euismod urna ac ultricies tristique. Nulla pellentesque justo est, eget ullamcorper dui ultricies nec. Suspendisse potenti. Etiam pellentesque dolor et risus ultrices, quis auctor ipsum pulvinar. Curabitur interdum enim ac hendrerit dictum. Maecenas turpis lectus, mollis id adipiscing vitae, ultrices sit amet justo. Nulla pellentesque varius commodo. Praesent vel dolor urna. Vivamus sed bibendum augue, vitae blandit nisl.</p>

            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam non lacus eu lorem venenatis imperdiet. Nam vitae lorem fringilla tortor facilisis euismod. Integer pellentesque nibh in arcu aliquam, ut vestibulum tellus ornare. Nulla sodales, turpis in viverra posuere, tellus libero porta massa, quis laoreet nisl risus at justo. Etiam fringilla, sem in blandit adipiscing, magna nibh pretium massa, non ullamcorper massa felis nec enim. Praesent nec tortor condimentum, luctus enim quis, pretium orci. Maecenas euismod urna ac ultricies tristique. Nulla pellentesque justo est, eget ullamcorper dui ultricies nec. Suspendisse potenti. Etiam pellentesque dolor et risus ultrices, quis auctor ipsum pulvinar. Curabitur interdum enim ac hendrerit dictum. Maecenas turpis lectus, mollis id adipiscing vitae, ultrices sit amet justo. Nulla pellentesque varius commodo. Praesent vel dolor urna. Vivamus sed bibendum augue, vitae blandit nisl.</p>            

            <p>“Impressions don’t monetize quality content,” said Tony Haile, CEO of web analytics firm Chartbeat, on a panel at Sharethrough’s Native Advertising Summit. “As long as someone clicks, you get your money. But how do you know if people were actually reading content? How can we measure attention?”</p>

            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam non lacus eu lorem venenatis imperdiet. Nam vitae lorem fringilla tortor facilisis euismod. Integer pellentesque nibh in arcu aliquam, ut vestibulum tellus ornare. Nulla sodales, turpis in viverra posuere, tellus libero porta massa, quis laoreet nisl risus at justo. Etiam fringilla, sem in blandit adipiscing, magna nibh pretium massa, non ullamcorper massa felis nec enim. Praesent nec tortor condimentum, luctus enim quis, pretium orci. Maecenas euismod urna ac ultricies tristique. Nulla pellentesque justo est, eget ullamcorper dui ultricies nec. Suspendisse potenti. Etiam pellentesque dolor et risus ultrices, quis auctor ipsum pulvinar. Curabitur interdum enim ac hendrerit dictum. Maecenas turpis lectus, mollis id adipiscing vitae, ultrices sit amet justo. Nulla pellentesque varius commodo. Praesent vel dolor urna. Vivamus sed bibendum augue, vitae blandit nisl.</p>

            <p>Something else</p>

            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam non lacus eu lorem venenatis imperdiet. Nam vitae lorem fringilla tortor facilisis euismod. Integer pellentesque nibh in arcu aliquam, ut vestibulum tellus ornare. Nulla sodales, turpis in viverra posuere, tellus libero porta massa, quis laoreet nisl risus at justo. Etiam fringilla, sem in blandit adipiscing, magna nibh pretium massa, non ullamcorper massa felis nec enim. Praesent nec tortor condimentum, luctus enim quis, pretium orci. Maecenas euismod urna ac ultricies tristique. Nulla pellentesque justo est, eget ullamcorper dui ultricies nec. Suspendisse potenti. Etiam pellentesque dolor et risus ultrices, quis auctor ipsum pulvinar. Curabitur interdum enim ac hendrerit dictum. Maecenas turpis lectus, mollis id adipiscing vitae, ultrices sit amet justo. Nulla pellentesque varius commodo. Praesent vel dolor urna. Vivamus sed bibendum augue, vitae blandit nisl.</p>

        </div>
    </body>
        <script>
            Livefyre.require([
                'sidenotes#1.1.14-permalink-example',
                'auth'
            ], function(Annotations, Auth) {
                var a = new Annotations({
                    selectors: '#content p, #content img',
                    collection: {
                        articleId: LF_articleId,
                        network: 'livefyre.com',
                        // environment: 'fy.re',
                        siteId: LF_siteId
                    },
                    collectionMeta: {
                        articleId: LF_articleId,
                        title: 'New annotations collection for article #' + LF_articleId + ' site#' + LF_siteId,
                        url: 'http://fyre.' + LF_articleId,
                        checksum: String(Math.random())
                    },
                    numSidenotesEl: document.getElementsByTagName('h1')[0],
                    customStyles: {
                        numSidenotes: {
                            height: '40px'
                        },
                        numSidenotesPopover: {
                            height: '400px'
                        }
                    }
                });
            });
        </script>
</html>